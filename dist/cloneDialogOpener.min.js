!function(o){"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),o(i),i}:o(jQuery)}(function(a){a.fn.getStyles=function(t,i){var o,e,n={};if(t&&t instanceof Array)for(var s=0,l=t.length;s<l;s++)n[e=t[s]]=this.css(e);else if(this.length){var a=this.get(0);if(window.getComputedStyle){var g,r,h=/\-([a-z])/g,d=function(t,i){return i.toUpperCase()},p=function(t){return t.replace(h,d)};if(o=window.getComputedStyle(a,null))if(o.length)for(s=0,l=o.length;s<l;s++)g=p(e=o[s]),r=o.getPropertyValue(e),n[g]=r;else for(e in o)g=p(e),r=o.getPropertyValue(e)||o[e],n[g]=r}else if(o=a.currentStyle)for(e in o)n[e]=o[e];else if(o=a.style)for(e in o)"function"!=typeof o[e]&&(n[e]=o[e])}if(i&&i instanceof Array)for(s=0,l=i.length;s<l;s++)delete n[e=i[s]];return n},a.fn.copyCSS=function(t,i,o){var e=a(t).getStyles(i,o);return this.css(e),this},a.widget("tonyhallett.dialogNoTitle",a.ui.dialog,{_create:function(){this._super(),this._changeTitleBar()},_setOptions:function(t){this._super(t),this._changeTitleBar()},_changeTitleBar:function(){this._getNoTitleBar()?this.uiDialogTitlebar.css("display","none"):this.uiDialogTitlebar.removeAttr("style"),this.options.noCloseButton?this.uiDialogTitlebarClose.css("display","none"):this.uiDialogTitlebar.removeAttr("style")},_getNoTitleBar:function(){var t=!0;return void 0!==this.options.noTitleBar?t=this.options.noTitleBar:(this.options.title||this.element.attr("title"))&&(t=!1),t}});var t="th_default_opener";a.widget("tonyhallett.dialogOpener",{options:{sameDialog:!1,draggableOptions:void 0,dialogOptions:{hide:500,show:500,noCloseButton:!0,resizable:!1,autoOpen:!1},defaultAppendToSelector:"body"},_setOptions:function(t){var o=!1,e=!1;a.each(t,function(t,i){if(-1!==t.indexOf("draggableOptions")?o=!0:-1!==t.indexOf("dialogOptions")&&(e=!0),o&&e)return!1}),this._super(t),o&&this._setUpDraggable(),e&&(this._dialog?(this._dialog.option(this._getDialogOptions()),this._alignDialog()):this._createDialog())},defaultElement:a("<img style='position:fixed;bottom:0px;z-index:100;background-color: #ffffff;border: 1px solid #eeeeee;box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);padding:10px'  class='"+t+"' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAB8ElEQVRoQ+2ZUU6DQBCGZ2wj+iD0CPUG9dHIHfQG1hOoJ9EbSG9Qb2BiGx/tEeoJ7OKDYoxjaCUhpHQ7DAuULK8ss/PN/8/ukkVo2YMt4wEL1HRFrUKtVOjz5aAf/Th3gDBAgH6ZkAQwB4KZ041uD0+/5tzYbMv9w7wiQo87GWc8ESycbnTChWIDqYk7BsBzTnLFx9Kj54cXnO/ZQItn7920OglAbL+er46NAqmJR+kJPF+xi7IpQWl8djLSCXXVlsa3QNIKWoWYPWotZy2na5rMe2nBrOWkFdQJJo1vFZJW0Cpk9yGdB0peVnXTSS1tFwVpBa1CdS8K4fRoSLT3oFMi709X6gAjPbQN1E4BxerooHYOKIZSU/ceCK/X2a+hQDTy/HC4LuEdVKg4TFyAhilUBIZGAHiZqNkgIDfg2gzx98o9+wjSNmwMUN7+ktczCUzyXTKu0UDbwqShYsXWFafyjTWbBBdGd4KoFahsmOXeJbwMYB99sr2QrXi2Z3SKZN/XAmRCmQSscqAiMLpTQ56KBPDW8xXrDpdluSphVpAGrySrhiEA5XSigbFLYzVxg/TRJa7fpgVAYjMEmu13vm+4MMucOKtQGkq6mnHm5YxlAa32CTdApKe8nZ4zuYmxbCATSZQZ0wKVWU0TsVqn0B8SptRED0pRGwAAAABJRU5ErkJggg==' width='52' height='52'/>"),_elementIsDefault:function(){return this.element.hasClass(t)},_addDefaultToDom:function(){this._elementIsDefault()&&this.element.appendTo(this.options.defaultAppendToSelector)},dialogClose:function(){this._dialog.close()},dialogOpen:function(){this._dialog.open()},dialogIsOpen:function(){return this._dialog.isOpen()},dialogMoveToTop:function(){return this._dialog.moveToTop()},_setUpDialog:function(){this._setUpClickHideShowDialog(),this.options.dialogOptions.autoOpen&&this._createDialog()},_setUpClickHideShowDialog:function(){this._on({click:function(){this._allowClick&&(this._showing?this._hideDialog():this._showDialog())}})},_showing:!1,_dialog:void 0,_createDialog:function(){this._dialog&&this._dialog.destroy();var t=this._getDialogElement();this._on(t,{dialognotitleclose:function(){this._showing=!1},dialognotitleopen:function(){this._showing=!0}}),t.dialogNoTitle(this._getDialogOptions(t)),this._dialog=t.dialogNoTitle("instance")},_getDialogOptions:function(t){return a.extend({},this.options.dialogOptions,{draggable:!1,position:{my:"left bottom",at:"left top",of:this.element}})},_setDialog:function(){(!this._dialog||!this.options.sameDialog)&&this._createDialog()},_showDialog:function(){this._setDialog(),this._dialog.open()},_hideDialog:function(){this._dialog.close()},_alignDialog:function(){this._dialog&&this._dialog.isOpen()&&this._dialog.option("position",{my:"left bottom",at:"left top",of:this.element})},draggableDisable:function(){this._draggable.disable()},draggableEnable:function(){this._draggable.enable()},draggableIsDisabled:function(){return this._draggable.option("disabled")},_allowClick:!0,_draggable:void 0,_setUpDraggable:function(){if(this.options.draggableOptions){var t=this.options.draggableOptions;t.containment||(t.containment="document"),this.element.draggable(t),this._draggable||(this._draggable=this.element.draggable("instance"),this._on({dragstart:function(t,i){this._allowClick=!1},drag:function(t,i){this._alignDialog()},dragstop:function(t,i){this._alignDialog(),window.setTimeout(function(){this._allowClick=!0}.bind(this),0)}}))}},_create:function(){this._addDefaultToDom(),this._setUpDialog(),this._setUpDraggable()},_destroy:function(){this._dialog&&this._dialog.destroy(),this._draggable&&this._draggable.destroy(),this._elementIsDefault()&&(this.element.detach(),window.setTimeout(function(){this.element.remove()}.bind(this),0))}}),a.widget("tonyhallett.cloneDialogOpener",a.tonyhallett.dialogOpener,{_create:function(){this.options.sameDialog=!this.options.alwaysClone,this._super()},options:{alwaysClone:!1},_getDialogElement:function(){return this._applyCloning()},_cloneCss:function(t,i){if(!0===this.options.cloneCss||"function"==typeof this.options.cloneCss)for(var o=[t].concat(t.find("*").toArray()),e=[i].concat(i.find("*").toArray()),n=0;n<o.length;n++){var s=o[n],l=("function"==typeof this.options.cloneCss?this.options.cloneCss:function(){return!0})(s,n);!1!==l&&(!0===l?a(e[n]).copyCSS(s):a(e[n]).copyCSS(o[n],l.only,l.except))}},_applyCloning:function(){var t=a(this.options.cloneSelector),i=t.clone();return this._cloneCss(t,i),i},_setOption:function(t,i){"alwaysClone"===t&&this._super("sameDialog",!i),this._super(t,i)}})});